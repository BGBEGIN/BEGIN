(this["webpackJsonpxxx-swap"]=this["webpackJsonpxxx-swap"]||[]).push([[27],{1364:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return $}));var c,r,a,s,i,o=n(6),u=n(2),b=n(57),l=n(4),d=n(22),j=n(5),x=n(415),O=n(162),p=n(65),f=n(255),m=n(17),h=n(814),v=n(804),k=n(20),g=n(818),w=n(396),y=n(393),S=n(132),C=n(0),A=function(e){var t=e.src,n=Object(l.Yb)(),c=Object(u.useMemo)((function(){var e=n.isXxl,t=n.isMd;return e?"ld":t?"sm":"md"}),[n]);return Object(C.jsx)(l.q,{children:Object(C.jsx)(S.c,{nft:Object(m.b)(p.g.mysteryNft.address),scale:c,src:t})})},N=n(3),B=n.n(N),K=n(9),L=n(15),M=n.n(L),T=n(32),P=n(51),I=n(803),Q=n(401),q=n(56),G=n(163),Y=n(932),E=n(12),z=n(44),D=n(98),V=n(140),W=n(130),F=(Object(j.e)(l.bb)(c||(c=Object(o.a)(["\n  width: 50px;\n  padding: 5px;\n  min-width: 50px;\n  box-shadow: none;\n  text-align: center;\n  font-weight: bold;\n  font-size: 20px;\n  color: ",";\n"])),(function(e){return e.theme.colors.textPrimary})),function(e){var t=e.isApproved,n=e.userLoaded,c=e.account,r=e.tokenAddress,a=e.max,s=e.onApprove,i=e.onBuy,o=Object(k.b)().t,b=Object(u.useState)(!1),d=Object(E.a)(b,2),j=d[0],x=d[1],O=Object(u.useState)(!1),p=Object(E.a)(O,2),f=p[0],m=p[1],h=Object(D.a)(),v=h.toastSuccess,g=h.toastError,w=Object(u.useState)("1"),y=Object(E.a)(w,2),S=y[0],A=y[1],N=Object(u.useCallback)(Object(K.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),e.next=4,s();case 4:x(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[s]),L=Object(u.useCallback)(Object(K.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,i(S);case 4:v(o("Success!"),o("You can view in your bag")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),g(o("Error"),o("Please try again. Confirm the transaction and make sure you are paying enough gas!"));case 11:return e.prev=11,m(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])}))),[i,S,v,g,o]);return Object(C.jsx)(l.Q,{height:"100%",justifyContent:"space-between",alignItems:"center",children:c?t?Object(C.jsxs)(l.Q,{flex:"1",justifyContent:"space-between",children:[Object(C.jsxs)(l.Q,{style:{position:"relative"},alignItems:"center",children:[Object(C.jsx)(l.S,{max:a,onChange:A,value:S}),!a&&Object(C.jsx)(l.Kb,{color:"orange",textAlign:"center",fontSize:"14px",style:{position:"absolute",bottom:"-4px"},children:o("Insufficient %symbol% balance",{symbol:""})})]}),Object(C.jsxs)(l.q,{children:[Object(C.jsx)(l.r,{scale:"ld",disabled:f||!Number(S)||!a,onClick:L,children:f?Object(C.jsx)(W.a,{children:o("Buying")}):o("Buy")}),Object(C.jsx)("br",{}),Object(C.jsx)(l.r,{scale:"ld",mt:"16px",as:l.fb,href:"".concat(z.h).concat(r),children:o("Buy fragment")})]})]}):Object(C.jsx)(l.r,{scale:"ld",disabled:j||!n,onClick:N,children:j?Object(C.jsx)(W.a,{children:o("Enabling %asset%",{asset:""})}):o("Enable %asset%",{asset:""})}):Object(C.jsx)(V.a,{})})}),J=Object(j.e)(l.cb)(r||(r=Object(o.a)(["\n  min-width: 40%;\n  height: 130px;\n  margin: 32px 0 24px 0;\n  padding: 8px 26px 16px;\n  display: flex;\n  flex: 1;\n  justify-content: space-between;\n  flex-direction: column;\n"]))),U=Object(j.e)(J)(a||(a=Object(o.a)(["\n  padding-bottom: 8px;\n"]))),X=4294967295,H=function(e){var t=e.desc,n=e.account,c=e.userLoaded,r=e.title,a=e.nftFtokenName,s=e.nftName,i=e.ticketBalance,o=e.type,b=e.currencyAddress,j=Object(k.b)().t,x=Object(T.b)();Object(h.e)();var O=Object(h.f)(),p=Object(u.useMemo)((function(){return o&&O[o]?O[o]:O[d.c.DSGAV]}),[o,O]),f=Object(u.useMemo)((function(){return p.ticketInfo}),[p]),m=Object(I.b)(b).balance,v=Object(Y.a)(b).onApprove,g=Object(u.useCallback)(Object(K.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(p.exchangeAddress);case 2:x(Object(Q.e)(n));case 3:case"end":return e.stop()}}),e)}))),[v,x,p.exchangeAddress,n]),w=function(){var e=Object(q.h)();return{onBuyTicketNft:Object(u.useCallback)(function(){var t=Object(K.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(G.c)(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}}().onBuyTicketNft,y=function(){var e=Object(q.q)();return{onBuyYcTicketNft:Object(u.useCallback)(function(){var t=Object(K.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(G.e)(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}}().onBuyYcTicketNft,S=Object(u.useCallback)(function(){var e=Object(K.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new M.a(null===f||void 0===f?void 0:f.ticketPrice).times(t).toString(),o!==d.c.DSGAV){e.next=6;break}return e.next=4,w(n);case 4:e.next=9;break;case 6:if(o!==d.c.DSGYC){e.next=9;break}return e.next=9,y(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[w,y,o,null===f||void 0===f?void 0:f.ticketPrice]),A=new M.a(p.allowanceTicket),N=n&&A&&A.isGreaterThan(0),L=Object(u.useMemo)((function(){return Number(null===f||void 0===f?void 0:f.limit)?Number(null===f||void 0===f?void 0:f.limit)-Number(null===f||void 0===f?void 0:f.count):X}),[null===f||void 0===f?void 0:f.limit,null===f||void 0===f?void 0:f.count]),E=Object(u.useMemo)((function(){var e=0;return m.isGreaterThan(0)&&Number(null===f||void 0===f?void 0:f.ticketPrice)&&(e=Math.floor(m.div(null===f||void 0===f?void 0:f.ticketPrice).toNumber())),e=e>L?L:e}),[m,L,null===f||void 0===f?void 0:f.ticketPrice]);return Object(C.jsxs)(l.q,{width:"100%",children:[Object(C.jsx)(l.T,{children:r}),Object(C.jsx)(l.Kb,{mt:"8px",color:"textSubtle",children:t}),Object(C.jsxs)(l.Kb,{mt:"14px",mr:"8px",color:"textSubtle",children:[Object(C.jsxs)(l.Kb,{mr:"0.5em",as:"span",bold:!0,children:[j("Total supply "),":"]}),Number(null===f||void 0===f?void 0:f.limit)||"--"]}),Object(C.jsxs)(l.Kb,{mt:"14px",mr:"8px",color:"textSubtle",children:[Object(C.jsxs)(l.Kb,{mr:"0.5em",as:"span",bold:!0,children:[j("Current remaining total"),":"]}),Number(null===f||void 0===f?void 0:f.limit)?L===X?j("Unlimited"):L:"--"]}),Object(C.jsxs)(l.Kb,{mt:"14px",mr:"8px",color:"textSubtle",children:[Object(C.jsxs)(l.Kb,{mr:"0.5em",as:"span",bold:!0,children:[j("Current exchange ratio"),":"]}),j("%amount% %assets%",{amount:Object(P.g)(new M.a((null===f||void 0===f?void 0:f.ticketPrice)||0)),assets:a}),Object(C.jsx)(l.Kb,{as:"span",margin:"0.5em",children:"="}),j("%amount% %assets%",{amount:1,assets:s})]}),Object(C.jsx)(l.Q,{flexWrap:"wrap",children:Object(C.jsx)(U,{children:Object(C.jsx)(F,{account:n,onApprove:g,onBuy:S,max:E,userLoaded:c,tokenAddress:b,isApproved:N})})}),Object(C.jsxs)(l.Kb,{fontSize:"14px",bold:!0,children:[j("You currently have"),j("%amount% %assets%",{amount:Object(P.g)(m),assets:a}),",",j("%amount% %assets%",{amount:i,assets:s})]})]})},R=Object(j.e)(f.a)(s||(s=Object(o.a)(["\n  padding-top: 0;\n"]))),Z=Object(j.e)(l.v)(i||(i=Object(o.a)(["\n  height: 100%;\n  ","\n  width: 100%;\n"])),(function(e){return e.theme.mediaQueriesSize.padding})),$=function(){Object(O.a)().theme;var e=Object(k.b)().t,t=Object(b.c)().account;Object(h.d)(),Object(v.f)();var n=Object(v.i)().user,c=n.data,r=n.loaded,a=Object(x.a)().type;Object(g.a)();var s=Object(g.b)(),i=(s.data,s.loaded,s.userLoaded),o=Object(h.f)(),j=Object(u.useMemo)((function(){var e,t;return a&&o[a]?null===(t=o[a].ticketAddress)||void 0===t?void 0:t.toLowerCase():null===(e=o[d.c.DSGAV].ticketAddress)||void 0===e?void 0:e.toLowerCase()}),[a,o]),f=Object(u.useMemo)((function(){return c.filter((function(e){var t;return(null===(t=e.properties.token)||void 0===t?void 0:t.toLowerCase())===j}))}),[c,j]);return Object(C.jsxs)(y.a,{index:2,width:"100%",background:"bgimage2",children:[Object(C.jsx)(w.a,{}),Object(C.jsx)(R,{children:Object(C.jsx)(l.q,{children:Object(C.jsxs)(l.Q,{flexWrap:"wrap",children:[Object(C.jsx)(l.v,{mb:"66px",padding:"24px",children:Object(C.jsx)(A,{title:"title",src:p.j[j].src})}),Object(C.jsx)(l.q,{width:"36px"}),Object(C.jsx)(l.Q,{flex:"1",mb:"66px",minWidth:"60%",children:Object(C.jsx)(Z,{children:Object(C.jsx)(H,{balanceLoaded:r,title:e(p.j[j].name),nftName:e(p.j[j].name),nftFtokenName:e(p.j[j].tokenInfo.name),userLoaded:i,nftSymbol:p.j[j].tokenInfo.symbol,currencyAddress:Object(m.b)(p.j[j].tokenInfo.address),desc:e(p.j[j].desc),account:t,type:a,ticketBalance:null===f||void 0===f?void 0:f.length})})})]})})})]})}},818:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var c=n(2),r=n(57),a=n(32),s=n(67),i=n(403),o=function(){var e=Object(s.b)(),t=Object(r.c)().account;Object(c.useEffect)((function(){e(Object(i.c)(t))}),[e,t])},u=function(){return Object(a.c)((function(e){return e.mysteryBox}))}}}]);
//# sourceMappingURL=27.5f719456.chunk.js.map